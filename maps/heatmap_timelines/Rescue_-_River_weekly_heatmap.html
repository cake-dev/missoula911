<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_c958c823d5adbae7105b9d1fa732d064 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    <script src="https://cdn.jsdelivr.net/gh/python-visualization/folium@main/folium/templates/leaflet_heat.min.js"></script>
</head>
<body>
    
    
    <div id='time-slider' style='position: fixed; bottom: 50px; left: 50px; z-index: 1000; background-color: white; 
         padding: 10px; border: 2px solid grey; border-radius: 5px;'>
        <h4>Week Selection</h4>
        <input type='range' min='0' max='18' value='0' class='slider' id='weekSlider'>
        <p>Current Week: <span id='currentWeek'>2023-05-02/2023-05-08</span></p>
        <button onclick='playTimeline()'>Play</button>
        <button onclick='pauseTimeline()'>Pause</button>
    </div>

    <script>
    var weeks = ["2023-05-02/2023-05-08", "2023-05-23/2023-05-29", "2023-05-30/2023-06-05", "2023-06-13/2023-06-19", "2023-06-20/2023-06-26", "2023-06-27/2023-07-03", "2023-07-04/2023-07-10", "2023-07-11/2023-07-17", "2023-07-18/2023-07-24", "2023-07-25/2023-07-31", "2023-08-08/2023-08-14", "2023-08-22/2023-08-28", "2024-02-06/2024-02-12", "2024-05-14/2024-05-20", "2024-06-04/2024-06-10", "2024-06-11/2024-06-17", "2024-06-25/2024-07-01", "2024-07-02/2024-07-08", "2024-07-09/2024-07-15"];
    var playing = false;
    var currentIndex = 0;
    var playInterval;

    function updateMap(weekIndex) {
        // Update current week display
        document.getElementById('currentWeek').textContent = weeks[weekIndex];

        // Get all layer checkboxes
        const checkboxes = document.getElementsByClassName('leaflet-control-layers-selector');

        // Ensure OSM base layer (index 0) stays checked
        if (!checkboxes[0].checked) {
            checkboxes[0].click();
        }

        // Uncheck "All Dates Combined" (index 1) if it's checked
        if (checkboxes[1].checked) {
            checkboxes[1].click();
        }

        // Hide all weekly layers first (starting from index 2)
        for (let i = 2; i < checkboxes.length; i++) {
            if (checkboxes[i].checked) {
                checkboxes[i].click();
            }
        }

        // Show selected week (add 2 to weekIndex to account for OSM and All Dates layers)
        if (weekIndex > 0) {
            const targetIndex = weekIndex + 1;  // +1 because weekIndex starts at 1
            if (targetIndex < checkboxes.length && !checkboxes[targetIndex].checked) {
                checkboxes[targetIndex].click();
            }
        }
    }

    document.getElementById('weekSlider').addEventListener('input', function() {
        var weekIndex = parseInt(this.value);
        updateMap(weekIndex);
    });

    function playTimeline() {
        if(!playing) {
            playing = true;
            // Start by updating the map to ensure proper initial state
            updateMap(currentIndex);
            playInterval = setInterval(function() {
                currentIndex = (currentIndex + 1) % weeks.length;
                document.getElementById('weekSlider').value = currentIndex;
                updateMap(currentIndex);
            }, 250); // Change week every quarter second
        }
    }

    function pauseTimeline() {
        playing = false;
        clearInterval(playInterval);
    }

    // Initial setup to ensure proper layer visibility
    window.addEventListener('load', function() {
        const checkboxes = document.getElementsByClassName('leaflet-control-layers-selector');
        // Ensure OSM layer is visible
        if (!checkboxes[0].checked) {
            checkboxes[0].click();
        }
    });
    </script>
    
    
            <div class="folium-map" id="map_c958c823d5adbae7105b9d1fa732d064" ></div>
        
</body>
<script>
    
    
            var map_c958c823d5adbae7105b9d1fa732d064 = L.map(
                "map_c958c823d5adbae7105b9d1fa732d064",
                {
                    center: [46.87, -113.99],
                    crs: L.CRS.EPSG3857,
                    zoom: 12,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_c329c64b298848f4dd9d7ba9b8f365a2 = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {"attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors", "detectRetina": false, "maxNativeZoom": 19, "maxZoom": 19, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            );
        
    
            tile_layer_c329c64b298848f4dd9d7ba9b8f365a2.addTo(map_c958c823d5adbae7105b9d1fa732d064);
        
    
            var feature_group_51b6d0935b83e94da83196cb15077f43 = L.featureGroup(
                {}
            );
        
    
            var heat_map_5fda6bf2f0cc1ba80b6eefa3ecdceeb7 = L.heatLayer(
                [[46.8707109006717, -114.063152913058], [46.8632336067922, -114.090627162452], [46.8750751797563, -114.018531739748], [46.8744976141032, -114.0185476835], [46.86780832644, -113.98686106121], [46.8689131817011, -113.987727917022], [46.8632740651771, -113.959103936868], [47.0096569558157, -114.547108721756], [46.8759054303692, -114.010765965847], [46.8266308164887, -113.829751742508], [46.870363477215, -113.936817053434], [46.8700928996555, -113.995197477194], [46.8025520953596, -113.792010971071], [46.6992981572898, -113.666988107606], [46.8704713498498, -114.133050883412], [46.8777737232436, -114.018690565294], [46.7352576384619, -113.700213558996], [46.8729327499419, -114.005413657076], [46.9676712587178, -114.229925640784], [46.7783489731249, -113.722046612971], [46.840904280159, -114.109534865326], [46.8775887294868, -114.019552740385], [46.8528918249994, -114.097179751679], [47.0203027030803, -114.376510177578], [46.7274351864853, -113.667946536993], [46.873039219644, -113.891631440686]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_5fda6bf2f0cc1ba80b6eefa3ecdceeb7.addTo(feature_group_51b6d0935b83e94da83196cb15077f43);
        
    
            feature_group_51b6d0935b83e94da83196cb15077f43.addTo(map_c958c823d5adbae7105b9d1fa732d064);
        
    
            var feature_group_113177c3a7416a85fa8a4c4c2070d6e1 = L.featureGroup(
                {}
            );
        
    
            var heat_map_893ebde2af54eb05c3af46fdd8521d9c = L.heatLayer(
                [[46.8707109006717, -114.063152913058], [46.8632336067922, -114.090627162452], [46.8750751797563, -114.018531739748], [46.8744976141032, -114.0185476835]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_893ebde2af54eb05c3af46fdd8521d9c.addTo(feature_group_113177c3a7416a85fa8a4c4c2070d6e1);
        
    
            var feature_group_a7624dd498a4438f15446f1f484f7de3 = L.featureGroup(
                {}
            );
        
    
            var heat_map_4b9aab8f8495c74d33a996dfa39b897b = L.heatLayer(
                [[46.86780832644, -113.98686106121]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_4b9aab8f8495c74d33a996dfa39b897b.addTo(feature_group_a7624dd498a4438f15446f1f484f7de3);
        
    
            var feature_group_4c701af83c2458c25427b8da7901c464 = L.featureGroup(
                {}
            );
        
    
            var heat_map_58e5a2bae6a1fafb57f34c08f96c9889 = L.heatLayer(
                [[46.8689131817011, -113.987727917022]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_58e5a2bae6a1fafb57f34c08f96c9889.addTo(feature_group_4c701af83c2458c25427b8da7901c464);
        
    
            var feature_group_8f1b248dd15233392bef3b4993f91897 = L.featureGroup(
                {}
            );
        
    
            var heat_map_79373f2bd2bfad0ee99632eb0d390478 = L.heatLayer(
                [[46.8632740651771, -113.959103936868]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_79373f2bd2bfad0ee99632eb0d390478.addTo(feature_group_8f1b248dd15233392bef3b4993f91897);
        
    
            var feature_group_5e3b74f53647d73c05c3f949ff256b86 = L.featureGroup(
                {}
            );
        
    
            var heat_map_083950192775223e4db55dc42546fc7b = L.heatLayer(
                [[47.0096569558157, -114.547108721756]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_083950192775223e4db55dc42546fc7b.addTo(feature_group_5e3b74f53647d73c05c3f949ff256b86);
        
    
            var feature_group_629974b9b215c10e6d8dbc3d230ae9b2 = L.featureGroup(
                {}
            );
        
    
            var heat_map_53f3c1b40a827ef8ee7141a90b1bebbf = L.heatLayer(
                [[46.8759054303692, -114.010765965847], [46.8266308164887, -113.829751742508]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_53f3c1b40a827ef8ee7141a90b1bebbf.addTo(feature_group_629974b9b215c10e6d8dbc3d230ae9b2);
        
    
            var feature_group_d7e9be4e201fd3912f2faed44ad12270 = L.featureGroup(
                {}
            );
        
    
            var heat_map_62f7a5b50e5d5ee34ce5729a37e32a72 = L.heatLayer(
                [[46.870363477215, -113.936817053434], [46.8700928996555, -113.995197477194]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_62f7a5b50e5d5ee34ce5729a37e32a72.addTo(feature_group_d7e9be4e201fd3912f2faed44ad12270);
        
    
            var feature_group_dfa5ea1ba4fe01c5b4dd37efc680e01a = L.featureGroup(
                {}
            );
        
    
            var heat_map_b54772981262c0d8af553aac4801aac9 = L.heatLayer(
                [[46.8025520953596, -113.792010971071]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_b54772981262c0d8af553aac4801aac9.addTo(feature_group_dfa5ea1ba4fe01c5b4dd37efc680e01a);
        
    
            var feature_group_06c948487eff3a8eff42b5fecadec9f3 = L.featureGroup(
                {}
            );
        
    
            var heat_map_3fdde17ed5adeee29686b0319ab7431a = L.heatLayer(
                [[46.6992981572898, -113.666988107606], [46.8704713498498, -114.133050883412]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_3fdde17ed5adeee29686b0319ab7431a.addTo(feature_group_06c948487eff3a8eff42b5fecadec9f3);
        
    
            var feature_group_ddad200764b220ee9d7c53ceea4aff93 = L.featureGroup(
                {}
            );
        
    
            var heat_map_11f2f983671c7f5b3af6b9514c8217b2 = L.heatLayer(
                [[46.8777737232436, -114.018690565294], [46.7352576384619, -113.700213558996]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_11f2f983671c7f5b3af6b9514c8217b2.addTo(feature_group_ddad200764b220ee9d7c53ceea4aff93);
        
    
            var feature_group_142cc2b44c45911475c69e6cae601f01 = L.featureGroup(
                {}
            );
        
    
            var heat_map_08ac99f168d492dff380169c7e1a9fb1 = L.heatLayer(
                [[46.8729327499419, -114.005413657076]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_08ac99f168d492dff380169c7e1a9fb1.addTo(feature_group_142cc2b44c45911475c69e6cae601f01);
        
    
            var feature_group_45f41dea4a6c790414ec495254aad4a7 = L.featureGroup(
                {}
            );
        
    
            var heat_map_299a1f3ae422b072e788d576b87319f0 = L.heatLayer(
                [[46.9676712587178, -114.229925640784]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_299a1f3ae422b072e788d576b87319f0.addTo(feature_group_45f41dea4a6c790414ec495254aad4a7);
        
    
            var feature_group_414bb6523134a8a256b5e081ef006556 = L.featureGroup(
                {}
            );
        
    
            var heat_map_c818507435b78ebcb3549a9ff693fcf9 = L.heatLayer(
                [[46.7783489731249, -113.722046612971]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_c818507435b78ebcb3549a9ff693fcf9.addTo(feature_group_414bb6523134a8a256b5e081ef006556);
        
    
            var feature_group_ec2f34bff2ba5bafc8fe0ef882041ff2 = L.featureGroup(
                {}
            );
        
    
            var heat_map_7e6059d3c9ca10d68cff115d4fbf3063 = L.heatLayer(
                [[46.840904280159, -114.109534865326]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_7e6059d3c9ca10d68cff115d4fbf3063.addTo(feature_group_ec2f34bff2ba5bafc8fe0ef882041ff2);
        
    
            var feature_group_ddc1c3184e37d324f775c573b74f6c44 = L.featureGroup(
                {}
            );
        
    
            var heat_map_ee2bc0a7423462c72b885b5ffcd6f1d5 = L.heatLayer(
                [[46.8775887294868, -114.019552740385]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_ee2bc0a7423462c72b885b5ffcd6f1d5.addTo(feature_group_ddc1c3184e37d324f775c573b74f6c44);
        
    
            var feature_group_f7a508bfe306973c4724c7f17e0f9c51 = L.featureGroup(
                {}
            );
        
    
            var heat_map_3f9c26a1e039d0002ca97cfe49929031 = L.heatLayer(
                [[46.8528918249994, -114.097179751679]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_3f9c26a1e039d0002ca97cfe49929031.addTo(feature_group_f7a508bfe306973c4724c7f17e0f9c51);
        
    
            var feature_group_ad5ce04d0c8b79d226b558f9d2e42332 = L.featureGroup(
                {}
            );
        
    
            var heat_map_a26706840ec2f00d98d497e3138bf4e0 = L.heatLayer(
                [[47.0203027030803, -114.376510177578]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_a26706840ec2f00d98d497e3138bf4e0.addTo(feature_group_ad5ce04d0c8b79d226b558f9d2e42332);
        
    
            var feature_group_5147751a82106eb916ac1760114ae696 = L.featureGroup(
                {}
            );
        
    
            var heat_map_8a806d16c75ef14d61d12cc3772b38af = L.heatLayer(
                [[46.7274351864853, -113.667946536993]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_8a806d16c75ef14d61d12cc3772b38af.addTo(feature_group_5147751a82106eb916ac1760114ae696);
        
    
            var feature_group_ea106fc3ba583c298ca735f25bac98c3 = L.featureGroup(
                {}
            );
        
    
            var heat_map_ef507d7588b6c4fcf8befa36933dc227 = L.heatLayer(
                [[46.873039219644, -113.891631440686]],
                {"blur": 15, "gradient": {"0.4": "blue", "0.65": "lime", "1": "red"}, "maxZoom": 18, "minOpacity": 0.4, "radius": 15}
            );
        
    
            heat_map_ef507d7588b6c4fcf8befa36933dc227.addTo(feature_group_ea106fc3ba583c298ca735f25bac98c3);
        
    
            var layer_control_a1f3b49fb27a075c7e986f64f30176c2_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_c329c64b298848f4dd9d7ba9b8f365a2,
                },
                overlays :  {
                    "All Dates Combined" : feature_group_51b6d0935b83e94da83196cb15077f43,
                    "Week of 2023-05-02" : feature_group_113177c3a7416a85fa8a4c4c2070d6e1,
                    "Week of 2023-05-23" : feature_group_a7624dd498a4438f15446f1f484f7de3,
                    "Week of 2023-05-30" : feature_group_4c701af83c2458c25427b8da7901c464,
                    "Week of 2023-06-13" : feature_group_8f1b248dd15233392bef3b4993f91897,
                    "Week of 2023-06-20" : feature_group_5e3b74f53647d73c05c3f949ff256b86,
                    "Week of 2023-06-27" : feature_group_629974b9b215c10e6d8dbc3d230ae9b2,
                    "Week of 2023-07-04" : feature_group_d7e9be4e201fd3912f2faed44ad12270,
                    "Week of 2023-07-11" : feature_group_dfa5ea1ba4fe01c5b4dd37efc680e01a,
                    "Week of 2023-07-18" : feature_group_06c948487eff3a8eff42b5fecadec9f3,
                    "Week of 2023-07-25" : feature_group_ddad200764b220ee9d7c53ceea4aff93,
                    "Week of 2023-08-08" : feature_group_142cc2b44c45911475c69e6cae601f01,
                    "Week of 2023-08-22" : feature_group_45f41dea4a6c790414ec495254aad4a7,
                    "Week of 2024-02-06" : feature_group_414bb6523134a8a256b5e081ef006556,
                    "Week of 2024-05-14" : feature_group_ec2f34bff2ba5bafc8fe0ef882041ff2,
                    "Week of 2024-06-04" : feature_group_ddc1c3184e37d324f775c573b74f6c44,
                    "Week of 2024-06-11" : feature_group_f7a508bfe306973c4724c7f17e0f9c51,
                    "Week of 2024-06-25" : feature_group_ad5ce04d0c8b79d226b558f9d2e42332,
                    "Week of 2024-07-02" : feature_group_5147751a82106eb916ac1760114ae696,
                    "Week of 2024-07-09" : feature_group_ea106fc3ba583c298ca735f25bac98c3,
                },
            };
            let layer_control_a1f3b49fb27a075c7e986f64f30176c2 = L.control.layers(
                layer_control_a1f3b49fb27a075c7e986f64f30176c2_layers.base_layers,
                layer_control_a1f3b49fb27a075c7e986f64f30176c2_layers.overlays,
                {"autoZIndex": true, "collapsed": true, "position": "topright"}
            ).addTo(map_c958c823d5adbae7105b9d1fa732d064);

        
</script>
</html>